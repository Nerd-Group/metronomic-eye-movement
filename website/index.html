<!DOCTYPE html>
<html lang="de">
    <head>
        <title>Control Panel</title>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=2, maximum-scale=1">
        <style>
            html,
            body{
                border: none;
                padding: 0;
                margin: 0;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                font-size: 1rem;
                color: darkslategrey;
            }
            body{
                display: flex;
                height: 100vh;
                width: 100vw;
                flex-direction: column;
                align-items: center;
                justify-content: space-around;
            }
            form{
                display:flex;
                flex-direction: column;
                justify-content: space-evenly;
                height: 50vh;
                padding: 0;
                margin: 0;
                border: none;
            }
            fieldset{
                border: none;
                flex: 0 0 auto;
            }
            h1{
                font-size: 1.6rem;
                font-weight: normal;
                color: darkcyan;
            }
            input[type="radio"]{
                margin-left: 0;
                margin-right: 1rem;
                vertical-align: center;
            }
            input[type="number"]{
                width: 4rem;
                margin-right: 0.5rem;
                appearance: textfield;
                text-align: center;
            }
            input[type="color"]{
                background-color: #fff;
                border: none;
                padding: 0;
            }
            input[type="button"]{
                background-color: #fff;
                border: solid 1px darkslategrey;
                font-size: 1.2rem;
                color: darkcyan;
                font-weight: normal;
                padding: 0.5rem;
            }
            input[type="button"]:hover,
            input[type="color"]:hover,
            input[type="radio"]:hover{
                cursor: pointer;
            }
        </style>
        <script>
            window.addEventListener("load", function(){
                document.getElementById("submit-button").addEventListener("click", function(){
                    var time = document.getElementById("duration").value;

                    if(document.getElementById("dauer-inf").checked){
                        var duration = 0;
                    } else {
                        var duration = document.getElementById("dauer-min").value;
                    }

                    var color = new Array(3);
                    var hexColor = document.getElementById("color").value;
                    for(var i = 0, j = 1; i < 3; i++, j+=2){
                        color[i] = parseInt(hexColor.substr(j, 2), 16);
                    }

                    fetch("/config?time=" + time + "&duration=" + duration + "&r=" + color[0] + "&g=" + color[1] + "&b=" + color[2]);
                });
                /*window.setTimeout(function(){
                    window.location.reload(true);
                }, 1000);*/
            });
        </script>
    </head>
    <body>
        <form>
            <fieldset id="formular">
                <label for="umlaufzeit">
                    <h1>Umlaufzeit</h1>
                    <p><input id="duration" name="umlaufzeit" type="number" step="0.2" min="0.2" max="10" value="4"> Sekunden</p>
                </label>
            </fieldset>
            <fieldset>
                <label for="dauer">
                    <h1>Dauer</h1>
                    <p><input id="dauer-inf" name="dauer" type="radio" value="Unendlich" checked><label for="dauer-infinity">&infin;</label></p>
                    <p><input id="dauer-val" name="dauer" type="radio" value="Zeitdauer"><input id="dauer-min" type="number" value="10" min="1" max="100" step="1"> Minuten</p>
                </label>
            </fieldset>
            <fieldset>
                <label for="farbe">
                    <h1>Farbe</h1>
                    <p><input id="color" name="farbe" type="color" value="#E57373"></p>
                </label>
            </fieldset>
            <fieldset>
                <label for="speichern">
                    <p><input id="submit-button" name="speichern" type="button" value="Speichern"></p>
                </label>
            </fieldset>
        </form>
    </body>
</html>